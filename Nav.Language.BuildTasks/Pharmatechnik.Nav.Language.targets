<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
 
  <UsingTask TaskName="Pharmatechnik.Nav.Language.BuildTasks.Nav" AssemblyFile="Pharmatechnik.Nav.Language.BuildTasks.dll" />

  <ItemGroup>
    <AvailableItemName Include="GenerateNavCode"/>
    <AvailableItemName Include="SkipNavCode"/>
  </ItemGroup>

  <PropertyGroup>
    <NavForce                Condition="'$(NavForce)'                == ''">false</NavForce>
    <NavGenerateToClasses    Condition="'$(NavGenerateToClasses)'    == ''">true</NavGenerateToClasses>
    <NavGenerateWflClasses   Condition="'$(NavGenerateWflClasses)'   == ''">true</NavGenerateWflClasses>
    <NavGenerateIwflClasses  Condition="'$(NavGenerateIwflClasses)'  == ''">true</NavGenerateIwflClasses>
    <NavUseSyntaxCache       Condition="'$(NavUseSyntaxCache)'       == ''">false</NavUseSyntaxCache>
    <NavFullPaths            Condition="'$(NavFullPaths)'            == ''">$(BuildingInsideVisualStudio)</NavFullPaths>
    <NavProjectRootDirectory Condition="'$(NavProjectRootDirectory)' == ''">$(MSBuildProjectDirectory)\</NavProjectRootDirectory>
    <NavIwflRootDirectory    Condition="'$(NavIwflRootDirectory)'    == ''"></NavIwflRootDirectory>
  </PropertyGroup>

  <Target Name="GenerateNavCode" BeforeTargets="PrepareForBuild">
    
    <ItemGroup>
      <NavFilesToProcess Include="@(GenerateNavCode)" Exclude="@(SkipNavCode)"/>
    </ItemGroup>
    
    <Nav Sources              = "@(NavFilesToProcess)"
         Force                = "$(NavForce)"
         GenerateToClasses    = "$(NavGenerateToClasses)"
         GenerateWflClasses   = "$(NavGenerateWflClasses)"
         GenerateIwflClasses  = "$(NavGenerateIwflClasses)"
         ProjectRootDirectory = "$(NavProjectRootDirectory)"
         IwflRootDirectory    = "$(NavIwflRootDirectory)"
         UseSyntaxCache       = "$(NavUseSyntaxCache)" 
         FullPaths            = "$(NavFullPaths)" />
  </Target>
  
</Project>